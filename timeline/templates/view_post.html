{% extends 'base_navbar.html' %}

{% block content %}
<div>
	<p><strong>{{ post.user.foodieprofile.full_name }}</strong> wrote:</p>
	<p>{{ post.text }}</p>
</div>

<hr>

<div id="comment-container">
	{% for comment in comments %}
	<div>
		<p><strong>{{ comment.user.foodieprofile.full_name }}</strong> replied:</p>
		<p>{{ comment.text }}</p>
	</div>
	{% endfor %}
</div>

<form id="comment-form">
	<input type="text" name="text" autocomplete="off" />
	<button type="submit">Create Comment</button>
</form>

<script>
document.getElementById('comment-form').addEventListener('submit', (e) => {
	e.preventDefault();

	fetch("{% url 'timeline:create_comment' post.id %}", {
		method: 'POST',
		body: new FormData(e.target),
	}).then(() => {
		e.target.reset();
	});
})
</script>

{% endblock content %}
