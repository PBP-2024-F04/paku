{% extends 'base_navbar.html' %}

{% block content %}
<h1>Products Page</h1>

{% if user.role == 'Foodie' %}
{% else %}
{% if not products %}
<p>{{ empty_message }}</p>
{% else %}
<table>
  <tr>
    <th>Product Name</th>
    <th>Restaurant</th>
    <th>Price</th>
    <th>Description</th>
    <th>Category</th>
  </tr>

  {% for product in products %}
  <tr>
    <td>{{ product.product_name }}</td>
    <td>{{ product.restaurant }}</td>
    <td>{{ product.price }}</td>
    <td>{{ product.description }}</td>
    <td>{{ product.category }}</td>
    <td>
      <a href="{% url 'products:view_product' product.pk %}">
          View
      </a>
    </td>
    
    {% if user.is_authenticated and user.role == 'Merchant' %}
    <td>
        <a href="{% url 'products:edit_product' product.pk %}">
            <button>
                Edit
            </button>
        </a>
    </td>
    <td>
        <a href="{% url 'products:delete_product' product.pk %}">
            <button>
                Delete
            </button>
        </a>
    </td>
    {% endif %}
  </tr>
  {% endfor %}
</table>
{% endif %}
{% endif %}

<br />

{% if user.is_authenticated and user.role == 'Merchant' %}
<a href="{% url 'products:create_product' %}">
  <button>Add New Product</button>
</a>
{% endif %}

{% endblock content %}